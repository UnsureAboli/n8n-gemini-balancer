# n8n-gemini-router

یک ورک‌فلو n8n برای **مسیریابی هوشمند (Smart Routing)** و **توزیع بار (Load Balancing)** بین چندین کلید API گوگل جمنای. این پروژه برای دور زدن محدودیت تعداد درخواست (Rate Limit) در کلیدهای API رایگان طراحی شده است.

---

### 💡 مشکل چیست؟

استفاده از کلیدهای API رایگان گوگل جمنای با **محدودیت تعداد درخواست** در دقیقه یا روز همراه است. اگر تمام درخواست‌های یک سرویس از طریق یک کلید ارسال شود، به سرعت به این محدودیت خواهید رسید و سرویس شما تا زمان آزاد شدن مجدد، متوقف خواهد شد.

### ✅ راه حل

این ورک‌فلو به عنوان یک **مسیریاب (Router)** هوشمند عمل می‌کند. به جای استفاده از یک کلید ثابت، این سیستم یک **"استخر" (Pool) از کلیدهای API** شما را مدیریت می‌کند. در هر بار اجرا، به صورت تصادفی یکی از کلیدها را انتخاب کرده و درخواست را از طریق آن ارسال می‌کند.

این کار باعث می‌شود بار ترافیکی به جای تمرکز روی یک کلید، بین همه کلیدها تقسیم شود و احتمال رسیدن به محدودیت به شدت کاهش یابد.

---

## ⚙️ نحوه عملکرد

این ورک‌فلو از سه بخش اصلی تشکیل شده است:

1.  **گره کد (Code Node):** انتخاب‌گر تصادفی.
2.  **مجموعه مدل‌های جمنای (Gemini Models):** استخر کلیدهای API شما.
3.  **انتخاب‌گر مدل (Model Selector):** مسیریاب اصلی.

### توضیحات گره کد (`Code` Node)

نقش این گره، تولید یک **عدد تصادفی** است که به عنوان مکانیزم انتخاب عمل می‌کند.

```javascript
const randomNumber = Math.floor(Math.random() * 10) + 1;
return { randomNumber };
